


{% extends 'base.html' %}
{% load static %}

{% block contenido_cuerpo %}

<section id="banner">
  {% if articulo_destacado %}
    <div class="content">
      <header>
        <h1>{{ articulo_destacado.nombre }}</h1>
        <p>{{ articulo_destacado.descripcion|truncatechars:180 }}</p>
      </header>
      <div class="actions">
        <a href="{% url 'articulos:path_detalle_articulo' articulo_destacado.pk %}" class="btn btn-primary">
            LEER AHORA
        </a>
      </div>
    </div>

    <span class="image object">
      {% if articulo_destacado.imagen %}
        <img src="{{ articulo_destacado.imagen.url }}" alt="{{ articulo_destacado.nombre }}" />
      {% else %}
        <img src="{% static 'images/pic10.jpg' %}" alt="" />
      {% endif %}
    </span>
  {% else %}
    <!-- Fallback si no hay artículos aún -->
    <div class="content">
      <header><h1>Sin artículos por ahora</h1></header>
      <p>Cuando crees el primero aparecerá aquí.</p>
    </div>
    <span class="image object">
      <img src="{% static 'images/pic10.jpg' %}" alt="" />
    </span>
  {% endif %}
</section>

<!-- Section -->
<section>
  <header class="major">
    <h2>Últimos Artículos</h2>
  </header>

  <section class="posts">
    {% for articulo in ultimos_articulos %}
      <article>
        {% if articulo.imagen %}
          <div class="image">
            <img src="{{ articulo.imagen.url }}" alt="{{ articulo.nombre }}" class="imagen_producto">
          </div>
        {% endif %}

        <h3>{{ articulo.nombre }}</h3>
        <p>{{ articulo.descripcion|truncatechars:100 }}</p>

        <div class="actions">
          <a href="{% url 'articulos:path_detalle_articulo' articulo.pk %}" class="btn btn-primary">Ver más</a>
          {% if es_moderador %}
            <a href="{% url 'articulos:path_editar_articulo' articulo.pk %}" class="btn btn-success">Editar</a>
            <a href="{% url 'articulos:path_eliminar_articulo' articulo.pk %}" class="btn btn-danger">Eliminar</a>
          {% endif %}
        </div>
      </article>
    {% endfor %}
  </section>

  <div class="actions">
    <a href="{% url 'articulos:path_listar_articulos' %}" class="btn btn-primary">
        VER TODOS LOS ARTÍCULOS
    </a>
  </div>

</section>

{% endblock %}
